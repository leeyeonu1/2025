import streamlit as st
import pandas as pd

# 앱 제목 설정
st.title('🐶 강아지 식재료 안전 체크')
st.write('식재료를 입력하면 강아지가 섭취 가능한지 알려드립니다!')

# 강아지가 먹을 수 있는/없는 음식 데이터베이스
dog_food_db = {
    # 기존 데이터
    '사과': {'섭취가능': True, '효능': '비타민 C와 식이섬유가 풍부하며 간식으로 좋습니다. 단, 씨는 제거해야 합니다.'},
    '포도': {'섭취가능': False, '효능': '강아지에게 신부전과 같은 심각한 건강 문제를 일으킬 수 있습니다.'},
    '당근': {'섭취가능': True, '효능': '비타민 A가 풍부하고 치아 건강에 좋습니다.'},
    '초콜릿': {'섭취가능': False, '효능': '테오브로민 성분이 강아지에게 유독하여 심장 문제, 발작 등을 유발할 수 있습니다.'},
    '닭고기': {'섭취가능': True, '효능': '단백질이 풍부하며 소화가 잘 됩니다. 뼈는 제거하고 주어야 합니다.'},
    '양파': {'섭취가능': False, '효능': '적혈구를 손상시키고 빈혈을 유발할 수 있습니다.'},
    '마늘': {'섭취가능': False, '효능': '양파와 같은 계열로 적혈구 손상을 일으킬 수 있습니다.'},
    '브로콜리': {'섭취가능': True, '효능': '비타민이 풍부하고 항암 효과가 있습니다.'},
    '아보카도': {'섭취가능': False, '효능': '페르신 성분이 강아지에게 유독할 수 있습니다.'},
    '연어': {'섭취가능': True, '효능': '오메가-3 지방산이 풍부하여 피부와 모질에 좋습니다.'},
    '견과류': {'섭취가능': False, '효능': '고지방이며 소화가 어렵고 일부는 독성이 있을 수 있습니다.'},
    '계란': {'섭취가능': True, '효능': '단백질이 풍부하며 완전히 익혀서 주는 것이 좋습니다.'},
    '치즈': {'섭취가능': True, '효능': '칼슘이 풍부하지만 소량만 주어야 합니다. 락토스 불내증이 있을 수 있습니다.'},
    '바나나': {'섭취가능': True, '효능': '칼륨과 비타민이 풍부하며 적당량은 건강에 좋습니다.'},
    '자일리톨': {'섭취가능': False, '효능': '인슐린 분비를 촉진해 저혈당을 일으킬 수 있으며 치명적일 수 있습니다.'},
    
    # 새로 추가하는 50가지 식재료
    '감': {'섭취가능': True, '효능': '비타민 C와 항산화제가 풍부하지만, 씨앗은 제거해야 합니다.'},
    '감자': {'섭취가능': True, '효능': '익힌 감자는 안전하며 비타민 C, B6, 칼륨이 풍부합니다. 생감자와 녹색 부분은 피해야 합니다.'},
    '갓': {'섭취가능': False, '효능': '매운맛과 자극적인 성분이 소화기 문제를 일으킬 수 있습니다.'},
    '강낭콩': {'섭취가능': False, '효능': '생 강낭콩은 독성이 있어 위험합니다. 완전히 조리된 경우에만 소량 가능합니다.'},
    '게살': {'섭취가능': True, '효능': '고품질 단백질과 오메가-3 지방산이 풍부합니다. 껍데기는 제거해야 합니다.'},
    '고등어': {'섭취가능': True, '효능': '오메가-3 지방산과 단백질이 풍부하여 피부와 모발 건강에 좋습니다.'},
    '고구마': {'섭취가능': True, '효능': '비타민 A, C, 식이섬유가 풍부하며 소화에 좋습니다.'},
    '고추': {'섭취가능': False, '효능': '매운 성분이 강아지의 위장을 자극하고 불편함을 줄 수 있습니다.'},
    '굴': {'섭취가능': True, '효능': '아연, 단백질, 오메가-3 지방산이 풍부합니다. 살짝 익혀서 주는 것이 안전합니다.'},
    '김': {'섭취가능': True, '효능': '비타민, 미네랄, 요오드가 풍부합니다. 소금이 첨가된 김은 피해야 합니다.'},
    '깻잎': {'섭취가능': False, '효능': '향이 강하고 독특한 성분이 있어 강아지에게 적합하지 않습니다.'}, # 위 코드에 중복 있어서 제거, 여기에 다시 넣음
    '대파': {'섭취가능': False, '효능': '양파과 식물로 적혈구 손상을 일으킬 수 있습니다.'}, # 위 코드에 중복 있어서 제거, 여기에 다시 넣음
    '도라지': {'섭취가능': False, '효능': '강아지의 소화계에 자극을 줄 수 있어 권장되지 않습니다.'},
    '돼지고기': {'섭취가능': True, '효능': '단백질과 비타민 B가 풍부합니다. 지방을 제거하고 완전히 익혀서 주세요.'},
    '두부': {'섭취가능': True, '효능': '저지방 단백질 공급원으로 소화가 쉽습니다. 간이나 양념 없이 주세요.'},
    '딸기': {'섭취가능': True, '효능': '비타민 C와 항산화제가 풍부합니다. 꼭지를 제거하고 잘 씻어서 소량만 주세요.'},
    '멍게': {'섭취가능': False, '효능': '해산물 알레르기를 일으킬 수 있으며, 강아지 소화계에 적합하지 않습니다.'},
    '메밀': {'섭취가능': True, '효능': '단백질과 식이섬유가 풍부합니다. 소량만 주세요. 일부 강아지는 알레르기 반응을 보일 수 있습니다.'},
    '명태': {'섭취가능': True, '효능': '저지방 단백질 공급원입니다. 뼈와 가시를 완전히 제거하고 익혀서 주세요.'},
    '무': {'섭취가능': True, '효능': '비타민 C와 식이섬유가 풍부하며 소화에 도움이 됩니다. 소량만 주세요.'},
    '미역': {'섭취가능': True, '효능': '미네랄과 요오드가 풍부합니다. 불린 미역을 소량만 주세요.'},
    '밤': {'섭취가능': True, '효능': '비타민 C와 미네랄이 풍부합니다. 껍질을 벗기고 익혀서 소량만 주세요.'},
    '배': {'섭취가능': True, '효능': '수분과 식이섬유가 풍부하며 시원한 간식이 될 수 있습니다. 씨는 제거해야 합니다.'},
    '배추': {'섭취가능': True, '효능': '비타민 K와 C가 풍부하며 소화에 도움을 줍니다. 소량만 주세요.'},
    '버섯 (표고버섯, 느타리버섯 등)': {'섭취가능': True, '효능': '비타민 B와 항산화제가 풍부합니다. 독성이 없는 버섯인지 확인하고 익혀서 주세요.'},
    '블루베리': {'섭취가능': True, '효능': '강력한 항산화제로 세포 손상을 방지합니다. 소량만 주세요.'},
    '상추': {'섭취가능': True, '효능': '수분 함량이 높고 칼로리가 낮습니다. 소량만 주세요.'},
    '새우': {'섭취가능': True, '효능': '단백질과 오메가-3 지방산이 풍부합니다. 껍질과 내장을 제거하고 익혀서 주세요.'},
    '생강': {'섭취가능': False, '효능': '소화기 자극을 유발할 수 있으며, 강아지에게는 섭취를 권장하지 않습니다.'},
    '소고기': {'섭취가능': True, '효능': '고품질 단백질과 필수 영양소가 풍부합니다. 지방이 적은 부위를 완전히 익혀서 주세요.'},
    '수박': {'섭취가능': True, '효능': '수분 함량이 높고 갈증 해소에 좋습니다. 씨와 껍질은 제거해야 합니다.'},
    '숙주나물': {'섭취가능': True, '효능': '비타민과 미네랄이 풍부합니다. 익혀서 소량만 주세요.'},
    '시금치': {'섭취가능': True, '효능': '비타민과 미네랄이 풍부하지만 옥살산 성분이 신장 결석을 유발할 수 있으니 소량만 주세요.'},
    '쌀 (현미, 백미 등)': {'섭취가능': True, '효능': '소화가 잘 되며 알레르기 반응이 적어 강아지에게 좋은 탄수화물 공급원입니다.'},
    '애호박': {'섭취가능': True, '효능': '수분과 식이섬유가 풍부하며 소화가 쉽습니다. 익혀서 주세요.'},
    '양배추': {'섭취가능': True, '효능': '비타민 C와 K가 풍부합니다. 과도한 섭취는 가스를 유발할 수 있으니 소량만 주세요.'},
    '어묵': {'섭취가능': False, '효능': '염분과 첨가물이 많아 강아지에게 적합하지 않습니다.'},
    '오리고기': {'섭취가능': True, '효능': '고단백 저지방 식품으로 알레르기 반응이 적습니다. 껍질을 제거하고 익혀서 주세요.'},
    '오이': {'섭취가능': True, '효능': '수분 함량이 높고 칼로리가 낮아 좋은 간식입니다. 소량만 주세요.'},
    '연근': {'섭취가능': True, '효능': '식이섬유가 풍부하며 소화에 도움이 됩니다. 익혀서 주세요.'},
    '옥수수': {'섭취가능': True, '효능': '탄수화물과 식이섬유가 풍부합니다. 알갱이만 익혀서 소량 주세요.'},
    '콩나물': {'섭취가능': True, '효능': '비타민 C와 아스파라긴산이 풍부합니다. 익혀서 소량만 주세요.'},
    '토마토': {'섭취가능': True, '효능': '익은 토마토는 안전하며 비타민과 항산화제가 풍부합니다. 푸른 부분(줄기, 잎)은 독성이 있습니다.'},
    '미나리': {'섭취가능': True, '효능': '비타민이 풍부하고 소화에 도움이 됩니다. 적당량을 주세요.'},
    '간장': {'섭취가능': False, '효능': '나트륨 함량이 높아 신장에 부담을 줄 수 있습니다.'},
    '참기름': {'섭취가능': True, '효능': '소량은 피모에 좋지만, 고지방이므로 소량만 주세요.'},
    '고춧가루': {'섭취가능': False, '효능': '위장 자극과 소화 문제를 일으킬 수 있습니다.'},
    '된장': {'섭취가능': False, '효능': '소금 함량이 높아 신장에 부담을 줄 수 있습니다.'},
    '김치': {'섭취가능': False, '효능': '마늘, 양파, 고추 등 강아지에게 해로운 성분이 포함되어 있습니다.'},

}

# 사용자 입력 받기
food_input = st.text_input('확인하고 싶은 식재료를 입력하세요:')

# 검색 버튼
if st.button('확인하기'):
    if food_input:
        food_input = food_input.strip()
        
        # 데이터베이스에서 검색
        if food_input in dog_food_db:
            info = dog_food_db[food_input]
            
            # 결과 표시
            if info['섭취가능']:
                st.success(f'✅ {food_input}은(는) 강아지가 먹어도 괜찮습니다!')
                st.info(f'💡 효능: {info["효능"]}')
            else:
                st.error(f'❌ {food_input}은(는) 강아지에게 위험합니다!')
                st.warning(f'⚠️ 위험성: {info["효능"]}')
        else:
            st.warning(f'{food_input}에 대한 정보가 데이터베이스에 없습니다.')
            st.info('더 많은 식재료 정보를 추가하고 있습니다. 나중에 다시 확인해주세요.')
    else:
        st.warning('식재료를 입력해주세요.')

# --- 새로운 기능 추가 ---
st.markdown("---") # 구분선 추가

# 확인 가능한 식재료 목록 표시
with st.expander("🐶 강아지가 먹을 수 있는 식재료 목록 보기"):
    safe_foods = [food for food, info in dog_food_db.items() if info['섭취가능']]
    if safe_foods:
        st.write("현재 앱에서 확인 가능한, 강아지에게 안전한 식재료 목록입니다:")
        for food in sorted(safe_foods): # 보기 좋게 정렬해서 보여줘요!
            st.markdown(f"- {food}")
    else:
        st.info("아직 안전한 식재료 정보가 충분하지 않네요. 더 많은 식재료를 추가해 볼까요?")

# 전체 식재료 목록 표시 (기존 기능)
with st.expander("🔎 전체 식재료 데이터베이스 보기"):
    data = []
    for food, info in dog_food_db.items():
        status = "섭취 가능" if info['섭취가능'] else "섭취 불가"
        data.append({"식재료": food, "상태": status, "효능/위험성": info['효능']})
    
    df = pd.DataFrame(data)
    st.dataframe(df)

# 앱 정보
st.sidebar.title("앱 정보")
st.sidebar.info(
    """
    이 앱은 강아지 보호자들이 안전하게 식재료를 선택할 수 있도록 도와주는 도구입니다.
    
    **참고:** 이 앱의 정보는 일반적인 가이드라인이며, 
    강아지의 개별적인 건강 상태나 알레르기에 따라 다를 수 있습니다.
    항상 의심스러운 경우 수의사와 상담하세요.
    """
)

# 앱 푸터
st.markdown("---")
st.markdown("🐾 강아지의 건강한 식단을 위한 안내서 🐾")
